
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://github.com/BPC-Exchange-Framework/E-Invoice-Onboarding-Toolkit/sml_hash_func/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.7">
    
    
      
        <title>SML Hash Functionality - E-Invoice Onboarding Toolkit</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Poppins";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#creating-the-sml-urn-hash" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="E-Invoice Onboarding Toolkit" class="md-header__button md-logo" aria-label="E-Invoice Onboarding Toolkit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.89 3 1.96.4L11.11 21l-1.96-.4L12.89 3m6.7 9L16 8.41V5.58L22.42 12 16 18.41v-2.83L19.59 12M1.58 12 8 5.58v2.83L4.41 12 8 15.58v2.83L1.58 12Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            E-Invoice Onboarding Toolkit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SML Hash Functionality
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="cyan" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/BPC-Exchange-Framework/E-Invoice-Onboarding-Toolkit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    E-Invoice Onboarding Toolkit
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="E-Invoice Onboarding Toolkit" class="md-nav__button md-logo" aria-label="E-Invoice Onboarding Toolkit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.89 3 1.96.4L11.11 21l-1.96-.4L12.89 3m6.7 9L16 8.41V5.58L22.42 12 16 18.41v-2.83L19.59 12M1.58 12 8 5.58v2.83L4.41 12 8 15.58v2.83L1.58 12Z"/></svg>

    </a>
    E-Invoice Onboarding Toolkit
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/BPC-Exchange-Framework/E-Invoice-Onboarding-Toolkit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    E-Invoice Onboarding Toolkit
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Project Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../outcomes/" class="md-nav__link">
        Outcomes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../assumptions/" class="md-nav__link">
        Assumptions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tools_and_resources/" class="md-nav__link">
        Tools and Resources
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../python_dev_env/" class="md-nav__link">
        Configure a Python Dev Environment
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../requirements/" class="md-nav__link">
        Package Requirements
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../working_with_the_code/" class="md-nav__link">
        Getting the Code
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Using the Code
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Using the Code" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Using the Code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../using_the_modules/" class="md-nav__link">
        The Modules
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          SML Hash Functionality
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        SML Hash Functionality
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#information-needed-to-create-the-urn" class="md-nav__link">
    Information needed to create the URN
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-create-the-hash" class="md-nav__link">
    Example - Create the hash
  </a>
  
    <nav class="md-nav" aria-label="Example - Create the hash">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-import-modules" class="md-nav__link">
    1. Import Modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-concatonate-the-string" class="md-nav__link">
    2. Concatonate the string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-convert-to-lower-case" class="md-nav__link">
    3. Convert to lower-case
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-encode-as-utf-8" class="md-nav__link">
    4. Encode as utf-8
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-create-sha256-hash" class="md-nav__link">
    5. Create sha256 hash
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-obtain-the-digest" class="md-nav__link">
    6. Obtain the 'digest'
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-encode-into-base32mkl" class="md-nav__link">
    7.  Encode into base32?mkl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-strip-off-extras" class="md-nav__link">
    8.  Strip off extras
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-convert-back-to-a-string" class="md-nav__link">
    9. Convert back to a String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10-convert-to-lower-case" class="md-nav__link">
    10. Convert to lower-case
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-output" class="md-nav__link">
    Final Output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code" class="md-nav__link">
    Code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    Output
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dns_query_sml/" class="md-nav__link">
        DNS Query for SML urn
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../smp_rest_query/" class="md-nav__link">
        SMP REST API Query
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../discovery_validation/" class="md-nav__link">
        Discovery Validation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../google_colab_pages/" class="md-nav__link">
        JupyterLab/Notebooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_8" type="checkbox" id="__nav_9_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_8">
          Package/Library API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Package/Library API" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_8">
          <span class="md-nav__icon md-icon"></span>
          Package/Library API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../accessor/" class="md-nav__link">
        accessor.py
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../project_roadmap/" class="md-nav__link">
        Project Roadmap
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../artifacts/" class="md-nav__link">
        Project Artifacts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../git_workflow/" class="md-nav__link">
        Workflow
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../oasis_documentation/" class="md-nav__link">
        OASIS Resources
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../_license/" class="md-nav__link">
        License
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../print_page/" class="md-nav__link">
        Print the Documentation
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#information-needed-to-create-the-urn" class="md-nav__link">
    Information needed to create the URN
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-create-the-hash" class="md-nav__link">
    Example - Create the hash
  </a>
  
    <nav class="md-nav" aria-label="Example - Create the hash">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-import-modules" class="md-nav__link">
    1. Import Modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-concatonate-the-string" class="md-nav__link">
    2. Concatonate the string
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-convert-to-lower-case" class="md-nav__link">
    3. Convert to lower-case
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-encode-as-utf-8" class="md-nav__link">
    4. Encode as utf-8
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-create-sha256-hash" class="md-nav__link">
    5. Create sha256 hash
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-obtain-the-digest" class="md-nav__link">
    6. Obtain the 'digest'
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-encode-into-base32mkl" class="md-nav__link">
    7.  Encode into base32?mkl
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-strip-off-extras" class="md-nav__link">
    8.  Strip off extras
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-convert-back-to-a-string" class="md-nav__link">
    9. Convert back to a String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10-convert-to-lower-case" class="md-nav__link">
    10. Convert to lower-case
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-output" class="md-nav__link">
    Final Output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code" class="md-nav__link">
    Code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    Output
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/BPC-Exchange-Framework/E-Invoice-Onboarding-Toolkit/edit/master/docs/sml_hash_func.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="creating-the-sml-urn-hash">Creating the SML URN Hash</h1>
<p>The SML look-up is a NAPTR DNS query which returns the URL of the SMP. The record queried is a URN constructed from the combined Specification, Schema, and Party ID and then hashed.  After the hash is created, the URN is combined with the look-up domain.  This combination is the record locator for the information in the DNS.  </p>
<p>The Python code, as script, function, or method, provides elaboration and implementation of the process as described in Section 3.2 of the <a href="https://github.com/BPC-Exchange-Framework/BPC-Market-Pilot/blob/f3844411c40dd4b84276fd3ef6020d247afd83c4/BPC%20SML%20Profile%20Version%201.0.pdf">BPC SML Profile Version 1.0</a> document found on the <a href="https://github.com/BPC-Exchange-Framework/BPC-Market-Pilot">BPC-Exchange-Framework/BPC-Market-Pilot Github site</a>.<br />
<br/></p>
<div class="admonition important">
<p class="admonition-title">The BPC SML Domain</p>
<p>The BPC SML Domain is:
<strong>bpcb2b.net</strong></p>
</div>
<p><br/></p>
<h2 id="information-needed-to-create-the-urn">Information needed to create the URN</h2>
<p>Three data points are required to create the URN:<br />
 
<ul>
   <li>Specification  (urn:oasis:names:tc:ebcore:partyid-type)</li>
    <li>Schema (iso6523:0060)  </li>
    <li>PartyID</li>
</ul></p>
<p><br/></p>
<div class="admonition note">
<p class="admonition-title">Note on non-fuctional requirements</p>
<p>This process to create a URN hash for look-up does not specify or require the Specification, 
Schema, or PartyID in a particular format.  The standard articulated for an ebCorePartyId referenced in the <a href="https://docs.oasis-open.org/bdxr/BDX-Location/v1.0/os/BDX-Location-v1.0-os.html">Business Document Metadata Service Location Version 1.0</a> referring to the <a href="https://docs.oasis-open.org/ebcore/PartyIdType/v1.0/PartyIdType-1.0.odt">OASIS ebCore Party Id Type Techinical Specification Version 1.0</a> provides normative guidelines for the Specification and Schema.    <br />
This code does not validate or enforce compliance with those standards.  Conformance to those are assumed, however the code works on any string of data.  </p>
</div>
<p><br/>  </p>
<h2 id="example-create-the-hash">Example - Create the hash</h2>
<p><br/>  </p>
<h3 id="1-import-modules">1. Import Modules</h3>
<p>The <code>hashlib</code> and <code>bas64</code> Python modules are used in this process.  </p>
<pre><code>import hashlib
import base64
</code></pre>
<p><br/>    </p>
<h3 id="2-concatonate-the-string">2. Concatonate the string</h3>
<p>Strings are a primitive data type in Python.  Instantiate and initialize string variables for the 
individual data values and concatonate them into a single string.   Simple validation of the correct 
format of the urn is included.  </p>
<pre><code>specification = "urn:oasis:names:tc:ebcore:partyid-type:unregistered:myscheme"  
schema = "BPC01"  
party_id = "bpcBusid01"   
urn = specification + ":" + schema + "::" + party_id  
urn_test_case = 
    "urn:oasis:names:tc:ebcore:partyid-type:unregistered:myscheme:BPC01::bpcBusid01"
print(f"urn is concatonated properly: {urn == urn_test_case}")  
print(urn)
</code></pre>
<div class="admonition important">
<p class="admonition-title">Punctuaion</p>
<p>Note the use of a single and a double colon as separators between the values.  These are 
includes as part of the string and are <strong>required</strong>.  </p>
</div>
<p><br/>  </p>
<h3 id="3-convert-to-lower-case">3. Convert to lower-case</h3>
<p>Implements the Python String <code>lower()</code> method.</p>
<pre><code>lower_case_urn = urn.lower()
print(f"URN converted to lower case: {lower_case_urn}")
</code></pre>
<p><br/>  </p>
<h3 id="4-encode-as-utf-8">4. Encode as utf-8</h3>
<p>The sha256 and base32 operations done on the string are Buffered Protocols, 
which requires that they be in a 
<a href="https://docs.python.org/3/glossary.html#term-bytes-like-object">bytes-like object</a> 
format in Python.  This is obtained using the String <code>encode()</code> 
method specifying "utf-8" as the format.<br />
The <code>bytes(x, encoding, error)</code> function could also be used here. </p>
<pre><code>urn_encoded =  lower_case_urn.encode('utf-8')
print (f"URN encoded as utf-8: {urn_encoded}")
</code></pre>
<p><br/>  </p>
<h3 id="5-create-sha256-hash">5. Create sha256 hash</h3>
<p>This implements the <code>sha256()</code> method of the hashlib module imported in Step #1.     </p>
<pre><code>sha256_urn  = hashlib.sha256(urn_encoded)
print (f"URN hashed using sha256 {sha256_urn}")
</code></pre>
<p><br/>    </p>
<h3 id="6-obtain-the-digest">6. Obtain the 'digest'</h3>
<p>The digest is the concatenation of all of the data fed into the hash so far, i.e., the current value.<br />
(Though implemented as a single operation here, the buffered protocol allows for additions and updates to the hash.)  The <code>digest()</code> method is included in the hashlib module.</p>
<pre><code>sha256_digest = sha256_urn.digest()
print(f"Digest of buffered stream containing results thus far: {sha256_digest}")
</code></pre>
<p><br/>  </p>
<h3 id="7-encode-into-base32mkl">7.  Encode into base32?mkl</h3>
<details class="note">
<summary>Why encode in base32?</summary>
<p>Encryption using sha256 results in a one-way hash. The original value of the URN is not intended to be derived from that hash as that is cryptographically impossible.  However, encoding the sha256 hash into base32 is NOT one way.  <br/><br/>The sha256 hash is 256 bits, or 32 bytes. A two digit hexadecimal representation of the 32 byte hash is 64 characters long.  Since base32 encoding has a character set of 32 compared to hexadecimal's 16, the sha256 hashed value can be reresented in 32 characters in base32 instead of the 64 required for hex.  <br/><br/>
The irreversible sha256 hash implies that the process is cryptographically meaningful.  It is not.  The value is ultimately used as a dictionary look-up in the DNS record <em>for a given domain</em>. Where a common specification and schema are in use by many participants, it becomes imperative that the PartyIDs are unique <em>for a specific domain</em>.  Otherwise, while a sha256 hash can't be reversed, it can be <strong>duplicated</strong>.  <br/><br/>
The output of this process is a 256 bit/32 byte value represented in a base 32 character set.</p>
</details>
<p>Take the digest entry, still a bytes-like object, and encode it in base32, 
resulting in a string 32 chacters in length.  This implements the <code>b32encode</code> 
method of the base64 module.</p>
<pre><code>b32_urn = base64.b32encode(sha256_digest)
print(f"The base32 encoded representation of the URN: {b32_urn}")
</code></pre>
<p><br/>    </p>
<h3 id="8-strip-off-extras">8.  Strip off extras</h3>
<p>The base32 encoding may result in extra characters at the end of the string.<br />
The <code>rstrip</code> String method is used to 
remove any of this additional padding at the end of the string.</p>
<pre><code>b32_urn_clean = b32_urn.rstrip(b"=")
print(f"The URN with any padding removed {b32_urn_clean}")
</code></pre>
<p><br/>    </p>
<h3 id="9-convert-back-to-a-string">9. Convert back to a String</h3>
<p>The object is still in a binary or bytes-like object format.<br />
Convert it back into a String primitive using the String <code>decode('utf-8)</code> method 
where 'utf-8' was the original encoding method.  </p>
<pre><code>b32_str = b32_urn_clean.decode('utf-8')
</code></pre>
<p><br/>    </p>
<h3 id="10-convert-to-lower-case">10. Convert to lower-case</h3>
<p>Per the specification, ensure the output is entirely in lowercase. 
This implements the String <code>lower()</code> method again.  </p>
<pre><code>final = b32_str.lower()
</code></pre>
<p><br/>   </p>
<h3 id="final-output">Final Output</h3>
<p>The final output of the hash algorithm.</p>
<pre><code>print(f"The final result: {final}")
</code></pre>
<hr>
<p><br/><br />
<br/>  </p>
<h2 id="code">Code</h2>
<p>The entirety of the Python code for the hash algorithm - can be run as a script or a function.</p>
<pre><code>    #########################################################
    #
    #  Example Constructing a URN for SML DNS NAPTR look-up
    #
    ##########################################################
    # import the modules
    import hashlib
    import base64
    # get the urn
    specification = "urn:oasis:names:tc:ebcore:partyid-type:unregistered:myscheme"
    schema = "BPC01"
    party_id = "bpcBusid01"
    urn = specification + ":" + schema + "::" + party_id
    urn_test_case = 
        "urn:oasis:names:tc:ebcore:partyid-type:unregistered:myscheme:BPC01::bpcBusid01"
    print(f"urn is concatonated properly: {urn == urn_test_case}")
    print(urn)
    # make sure it's converted to lower case
    lower_case_urn = urn.lower()
    print(f"URN converted to lower case {lower_case_urn}")
    # has to be a byte-like object to be hashed, so encode it as utf-8
    urn_encoded =  lower_case_urn.encode('utf-8')
    print (f"URN encoded as utf-8: {urn_encoded}")
    # now create the sha256 hash of it
    sha256_urn  = hashlib.sha256(urn_encoded)
    # get the current value of the buffer stream
    sha256_digest = sha256_urn.digest()
    print(f"Digest of buffered stream containing results thus far: {sha256_digest}")
    #encode into b32 
    b32_urn = base64.b32encode(sha256_digest)
    print(f"The base32 encoded representation of the URN: {b32_urn}")
    # strip off the equals sign.... 
    b32_urn_clean = b32_urn.rstrip(b"=")
    print(f"The URN with any padding removed {b32_urn_clean}")
    # convert it back to string.
    b32_str = b32_urn_clean.decode('utf-8')
    # make sure it's in lower case again.
    final = b32_str.lower()
    # This should be your final answer
    print(f"The final result: {final}")
</code></pre>
<hr>
<p><br/>  </p>
<h2 id="output">Output</h2>
<pre><code>urn is concatonated properly: True
urn:oasis:names:tc:ebcore:partyid-type:unregistered:myscheme:BPC01::bpcBusid01
URN converted to lower case: urn:oasis:names:tc:ebcore:partyid-type:unregistered:myscheme:bpc01::bpcbusid01
URN encoded as utf-8: b'urn:oasis:names:tc:ebcore:partyid-type:unregistered:myscheme:bpc01::bpcbusid01'
URN hashed using sha256 &lt;sha256 _hashlib.HASH object @ 0x106202710&gt;
Digest of buffered stream containing results thus far: b'\xc3{4\xfc3"\xdb\xc1u\xdcd\xe8\xbf\xe2\xad\x86\xdfjxob\x1e\'\x17\x8f\xb0\x83!\xec\x15\xab~'
The base32 encoded representation of the URN: b'YN5TJ7BTELN4C5O4MTUL7YVNQ3PWU6DPMIPCOF4PWCBSD3AVVN7A===='
The URN with any padding removed b'YN5TJ7BTELN4C5O4MTUL7YVNQ3PWU6DPMIPCOF4PWCBSD3AVVN7A'
The final result: yn5tj7bteln4c5o4mtul7yvnq3pwu6dpmipcof4pwcbsd3avvn7a
</code></pre>
<p><br/><br/></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../using_the_modules/" class="md-footer__link md-footer__link--prev" aria-label="Previous: The Modules" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              The Modules
            </div>
          </div>
        </a>
      
      
        
        <a href="../dns_query_sml/" class="md-footer__link md-footer__link--next" aria-label="Next: DNS Query for SML urn" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              DNS Query for SML urn
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
    <div class="md-copyright">
        
         
        <!-- <div class="md-copyright__highlight">
        Copyright &copy; 2022 - BPC Exchange Framework Open Source Tools Project
      </div>
      --->
      <div class="md-copyright-display">
        Copyright &copy; 2022 - BPC Exchange Framework Open Source Tools Project</div>
        <div class="md-footer-disclaimer-text">
            <div class="md-footer-disclaimer-statement">
                No Representations or Warranties
            </div>

            THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT
            LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO
            EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
            AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE
            OR OTHER DEALINGS IN THE SOFTWARE.

        </div>



        
        
        <!--  <div>
            Made with
            <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
                Material for MkDocs
            </a>
            <div>
                
            </div>
        </div>  -->
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.8492ddcf.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
  </body>
</html>