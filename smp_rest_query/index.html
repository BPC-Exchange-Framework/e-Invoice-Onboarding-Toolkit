
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://github.com/BPC-Exchange-Framework/E-Invoice-Onboarding-Toolkit/smp_rest_query/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.7">
    
    
      
        <title>SMP REST API Query - E-Invoice Onboarding Toolkit</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Poppins";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#smp-rest-api-query" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="E-Invoice Onboarding Toolkit" class="md-header__button md-logo" aria-label="E-Invoice Onboarding Toolkit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.89 3 1.96.4L11.11 21l-1.96-.4L12.89 3m6.7 9L16 8.41V5.58L22.42 12 16 18.41v-2.83L19.59 12M1.58 12 8 5.58v2.83L4.41 12 8 15.58v2.83L1.58 12Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            E-Invoice Onboarding Toolkit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SMP REST API Query
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="cyan" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/BPC-Exchange-Framework/E-Invoice-Onboarding-Toolkit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    E-Invoice Onboarding Toolkit
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="E-Invoice Onboarding Toolkit" class="md-nav__button md-logo" aria-label="E-Invoice Onboarding Toolkit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.89 3 1.96.4L11.11 21l-1.96-.4L12.89 3m6.7 9L16 8.41V5.58L22.42 12 16 18.41v-2.83L19.59 12M1.58 12 8 5.58v2.83L4.41 12 8 15.58v2.83L1.58 12Z"/></svg>

    </a>
    E-Invoice Onboarding Toolkit
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/BPC-Exchange-Framework/E-Invoice-Onboarding-Toolkit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    E-Invoice Onboarding Toolkit
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Project Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../outcomes/" class="md-nav__link">
        Outcomes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../assumptions/" class="md-nav__link">
        Assumptions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tools_and_resources/" class="md-nav__link">
        Tools and Resources
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../python_dev_env/" class="md-nav__link">
        Configure a Python Dev Environment
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../requirements/" class="md-nav__link">
        Package Requirements
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../working_with_the_code/" class="md-nav__link">
        Getting the Code
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Using the Code
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Using the Code" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Using the Code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../using_the_modules/" class="md-nav__link">
        The Modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sml_hash_func/" class="md-nav__link">
        SML Hash Functionality
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dns_query_sml/" class="md-nav__link">
        DNS Query for SML urn
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          SMP REST API Query
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        SMP REST API Query
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-rest-web-service-calls-to-the-smp-service" class="md-nav__link">
    The REST Web Service calls to the SMP service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-service-group-discovery" class="md-nav__link">
    1. Service Group Discovery
  </a>
  
    <nav class="md-nav" aria-label="1. Service Group Discovery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-the-smp-rest-api-call-1-to-obtain-servicegroup-data" class="md-nav__link">
    Creating the SMP REST API call #1 to obtain ServiceGroup data
  </a>
  
    <nav class="md-nav" aria-label="Creating the SMP REST API call #1 to obtain ServiceGroup data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1a-use-the-smp-web-service-being-queried-with-its-fully-qualified-domain" class="md-nav__link">
    1a. Use the SMP web service being queried with its fully qualified domain.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1b-the-smp-rest-binding" class="md-nav__link">
    1b.  The SMP REST Binding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1c-the-identifier-scheme" class="md-nav__link">
    1c.  The Identifier Scheme
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1d-append-the-partyid" class="md-nav__link">
    1d. Append the PartyID
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1e-create-the-string-for-the-smp-rest-api-query" class="md-nav__link">
    1e. Create the string for the SMP REST API Query
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1f-substitute-hex-into-the-url-for-successful-web-service-call" class="md-nav__link">
    1f. Substitute hex into the URL for successful web service call
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1g-make-the-web-service-call" class="md-nav__link">
    1g. Make the web service call
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    Output
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-service-metadata-query" class="md-nav__link">
    2. Service Metadata Query
  </a>
  
    <nav class="md-nav" aria-label="2. Service Metadata Query">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#call-2-to-obtain-servicemetadata" class="md-nav__link">
    Call #2 to obtain ServiceMetadata
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test_cases/" class="md-nav__link">
        Test Cases
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../discovery_validation/" class="md-nav__link">
        Discovery Validation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../google_colab_pages/" class="md-nav__link">
        JupyterLab/Notebooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_8" type="checkbox" id="__nav_9_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_8">
          Package/Library API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Package/Library API" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_8">
          <span class="md-nav__icon md-icon"></span>
          Package/Library API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../accessor/" class="md-nav__link">
        accessor.py
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../project_roadmap/" class="md-nav__link">
        Project Roadmap
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../artifacts/" class="md-nav__link">
        Project Artifacts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../git_workflow/" class="md-nav__link">
        Workflow
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../glossary/" class="md-nav__link">
        Glossary of Terms
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../standards/" class="md-nav__link">
        Standards
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../_license/" class="md-nav__link">
        License
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../print_page/" class="md-nav__link">
        Print the Documentation
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-rest-web-service-calls-to-the-smp-service" class="md-nav__link">
    The REST Web Service calls to the SMP service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-service-group-discovery" class="md-nav__link">
    1. Service Group Discovery
  </a>
  
    <nav class="md-nav" aria-label="1. Service Group Discovery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-the-smp-rest-api-call-1-to-obtain-servicegroup-data" class="md-nav__link">
    Creating the SMP REST API call #1 to obtain ServiceGroup data
  </a>
  
    <nav class="md-nav" aria-label="Creating the SMP REST API call #1 to obtain ServiceGroup data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1a-use-the-smp-web-service-being-queried-with-its-fully-qualified-domain" class="md-nav__link">
    1a. Use the SMP web service being queried with its fully qualified domain.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1b-the-smp-rest-binding" class="md-nav__link">
    1b.  The SMP REST Binding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1c-the-identifier-scheme" class="md-nav__link">
    1c.  The Identifier Scheme
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1d-append-the-partyid" class="md-nav__link">
    1d. Append the PartyID
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1e-create-the-string-for-the-smp-rest-api-query" class="md-nav__link">
    1e. Create the string for the SMP REST API Query
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1f-substitute-hex-into-the-url-for-successful-web-service-call" class="md-nav__link">
    1f. Substitute hex into the URL for successful web service call
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1g-make-the-web-service-call" class="md-nav__link">
    1g. Make the web service call
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    Output
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-service-metadata-query" class="md-nav__link">
    2. Service Metadata Query
  </a>
  
    <nav class="md-nav" aria-label="2. Service Metadata Query">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#call-2-to-obtain-servicemetadata" class="md-nav__link">
    Call #2 to obtain ServiceMetadata
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/BPC-Exchange-Framework/E-Invoice-Onboarding-Toolkit/edit/master/docs/smp_rest_query.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="smp-rest-api-query">SMP REST API Query</h1>
<p>Query to an SMP service to obtain terminal or final "Endpoint" destination of the e-invoice is implemented using two REST API web service calls.   </p>
<h2 id="references">References</h2>
<ul>
<li>See the <a href="https://github.com/BPC-Exchange-Framework/BPC-Market-Pilot/blob/f3844411c40dd4b84276fd3ef6020d247afd83c4/BPC%20SMP%20Profile%20Version%201.0.pdf">BPC SMP Profile Version 1.0</a> (the "Profile") document for general guidance to the format of this service call.  </li>
<li>See the OASIS website for the authoritative <a href="https://docs.oasis-open.org/bdxr/bdx-smp/v2.0/bdx-smp-v2.0.docx">OASIS SMP 2.0 Standard</a> (the "Standard").   </li>
<li>Section 3 of the BPC SMP Profile referencing the REST interface specifies in Section 3.1 that client authentication must not be required when accessing SMP [server] resources.    </li>
<li>The REST API for the web service calls are referenced in section 3.2 of the BPC SMP Profile, mandating implementation as provided in section 5.2 of the OASIS SMP 2.0 Standard.  <br />
<br/></li>
</ul>
<details class="note" open="open">
<summary>The BPC SMP Profile implements the OASIS SMP 2.0 Standard</summary>
<p>Section 3.2 of the BPC SMP Profile mandates implementation of the OASIS SMP 2.0 standard.  <br/><br/>To the extent that Section 6 of the BPC Profile has a requirement that the SMP client <strong>MUST</strong> validate the signature of the SMP [server response] as directed in section 5.6.2.2  of the OASIS standard, the OASIS standard is permissive and says the SMP client <strong>MAY</strong> verify the signature.</p>
</details>
<details class="warning">
<summary>Functional versus non-functional requirements</summary>
<p>Software engineering best practices including separation of concerns and SOLID Principles, specifically the single responsibility principle, limit the functional scope to the minimum necessary to  achieve the desired outcome.</p>
<p>Minimum Viable Product as outlined in the Project Goals, Project Roadmap, and Project Outcomes is achieved by abstraction of non-functional requirements.  </p>
<p>For example, the logic to calculate the hash necessary for the SML DNS look-up query is the same regardless of the value of the specification, the schema, or the party ID.  Validation of the specification, the schema, and the party ID may be Business Requirements, and each of those may have their own functional requirements.  In relation to creation of the hash for the DNS look-up query or the construction of the SMP REST API web service call, they are non-functional requirements; they do not impact or change the logic or behavior of those modules.  </p>
</details>
<h2 id="the-rest-web-service-calls-to-the-smp-service">The REST Web Service calls to the SMP service</h2>
<details class="important" open="open">
<summary>The rules for constructing the ServiceGroup  REST API web service call.</summary>
<p>In Section 5.4 "Resources" The OASIS SMP Standard provides the format used to create the ServiceGroup REST API web service call.  This specifies the <strong>oasis-bdxr-smp-2(bdxr-smp-2)</strong> SMP REST binding, the "identifier scheme" and the "participant id."  The "identifier scheme" is literally the URN specifying the format the participant ID is going to take.  </p>
</details>
<h2 id="1-service-group-discovery">1. Service Group Discovery</h2>
<p>The first REST API query to the Service Group is created using the SMP REST binding, "identifier scheme" and "participant ID."  </p>
<h3 id="creating-the-smp-rest-api-call-1-to-obtain-servicegroup-data">Creating the SMP REST API call #1 to obtain ServiceGroup data</h3>
<p><span style="font-size: 120%;">The first web service call to obtain the ServiceGroup data is constructed from:</span></p>
<h4 id="1a-use-the-smp-web-service-being-queried-with-its-fully-qualified-domain">1a. Use the SMP web service being queried with its fully qualified domain.</h4>
<ul>
<li>Not specified, but implied to make a web service call, is the scheme or protocol of "https://"   </li>
<li>Further unspecified, but implied as it is required, is the fully qualified application server domain and reference to any sub-domains. In the case of the example, this is "smp-api.sc-b2b.us."  The subdomain is "smp-api." The second-level domain is "sc-b2b." The top level domain is "us."</li>
<li>The only REST method required to be supported by the OASIS SMP Standard is "GET."  Everything after the domain specification is the "resource" uri of the GET method request.  </li>
</ul>
<p>Using these guidelines, in the development environment of the Onboarding Toolkit the first part of the URL is: <code>https://smp-api.sc-b2b.us/.</code> <em>This value will  be different in the Market Pilot.</em>  In the Market Pilot, use the value <em>bpcb2b.net</em>.  The URL will begin with <code>https://bpcb22.net/</code>  </p>
<h4 id="1b-the-smp-rest-binding">1b.  The SMP REST Binding</h4>
<p>Section 5.5 of the OASIS SMP 2.0 Standard provides the SMP REST Binding should be <code>oasis-bdxr-smp-2</code>.     However, In the prior Section 5.4 "Resources" the example URI indicates an SMP Binding of <code>bdxr-smp-2</code>.    </p>
<p>The development and test environment of the Onboarding Toolkit use <code>bdxr-smp-2</code> for the value of the SMP Binding.  </p>
<p>The Onboarding Toolkit dev URL becomes: <code>https://smp-api.sc-b2b.us/bdxr-smp-2/</code>    </p>
<p>The Market Pilot URL becomes: <code>https://bpcb22.net/bdxr-smp-2/</code></p>
<h4 id="1c-the-identifier-scheme">1c.  The Identifier Scheme</h4>
<p>The next element in the call to obtain the ServiceGroup data is the "identifier scheme" which identifies the format of the PartyID.  This value should already be known, as it is the Specification and the Schema used when creating the hash value for the SML NAPTR DNS look-up.  Together, the Specification and the Scheme create the "identifier scheme," which defines the <em>format</em> of the party ID.   </p>
<p>Detailed requirements of the identifier scheme are found in the <a href="http://docs.oasis-open.org/ebcore/PartyIdType/v1.0/CS01/PartyIdType-1.0.html">OASIS ebCore Party Id Type Technical Specification Version 1.0</a>  for the <strong>ebCorePartyID</strong>.</p>
<p>From the documentation, an example of a normative value for the identifier scheme is: <strong>urn:oasis:names:tc:ebcore:partyid-type:iso6523</strong>.  </p>
<p>The Onboarding Toolkit dev URL then becomes: <code>https://smp-api.sc-b2b.us/bdxr-smp-2/urn:oasis:names:tc:ebcore:partyid-type:iso6523</code>   </p>
<p>The Market Pilot URL becomes: <code>https://bpcb22.net\/bdxr-smp-2/urn:oasis:names:tc:ebcore:partyid-type:iso6523</code></p>
<h4 id="1d-append-the-partyid">1d. Append the PartyID</h4>
<p>After starting with the protocol, the fully qualified domain name of the SMP Application Server, the SMP Rest Binding, and the Identifier Scheme, the last component of the ServeGroup look-up REST API web service call is the party ID.  This should be the same value as that used in creating the hash for the SML DNS look-up.  </p>
<p>As an example, if the party id is "bpcBusid01"... <br />
The Onboarding Toolkit dev URN is (the same as in the SML DNS look-up): <code>urn:oasis:names:tc:ebcore:partyid-type:iso6523/bpcBusid01</code>   </p>
<p>The Market Pilot URN is (also the same as in the SML DNS look-up): <code>urn:oasis:names:tc:ebcore:partyid-type:iso6523/bpcBusid01</code></p>
<h4 id="1e-create-the-string-for-the-smp-rest-api-query">1e. Create the string for the SMP REST API Query</h4>
<p>The ServiceGroup web service call then takes the format of:<code>https://smp-api.sc-b2b.us/bdxr-smp-2/urn:oasis:names:tc:ebcore:partyid-type:iso6523/bpcBusid01</code></p>
<p>Using the terminology employed by the OASIS SMP 2.0 specification the URL is constructed as:  <code>https://bpcb22.net/bdxr-smp-2/urn:oasis:names:tc:ebcore:partyid-type:iso6523/bpcBusid01</code></p>
<h4 id="1f-substitute-hex-into-the-url-for-successful-web-service-call">1f. Substitute hex into the URL for successful web service call</h4>
<p>The URL to be used for the SML REST API query is defective in that it has illegal characters that can't be parsed into a recognizable web address.  The extra colons ":" will cause problems.  To remedy this do a string search/replace substitution on the offending punctuation and convert it to hex representation which can be handled by the browser.  The hex representation of a colon is "\3A."  Substitute "\3A" in the URL every place where it is used as part  of the resource and the literal protocol.  </p>
<p>The ServiceGroup web service call then takes the format of:
<code>https://smp-api.sc-b2b.us/bdxr-smp-2/urn\3Aoasis\3Anames\3Atc\3Aebcore\3Apartyid-type\3Aiso6523\3A\3AbpcBusid01</code></p>
<p>Using the terminology employed by the OASIS SMP 2.0 specification the URL is constructed as:  <code>https://bpcb22.net\/bdxr-smp-2/urn\3Aoasis\3Anames\3Atc\3Aebcore\3Apartyid-type\3Aiso6523\3A\3AbpcBusid01</code></p>
<details class="note">
<summary>Test the SMP REST API web service call</summary>
<p>When the URL is constructed properly it is a simple matter to copy and paste it into a web browser.  The response should  be the SMP ServiceGroup look-up data in XML format.</p>
</details>
<h4 id="1g-make-the-web-service-call">1g. Make the web service call</h4>
<p>The response of the Service Group Discovery returns information necessary to construct the Service Metadata Query.  The BPC SMP Profile requires that the Service Group Discovery REST API call must not be skipped and that the presence of Service Metadata should not be assumed.</p>
<h2 id="example">Example</h2>
<pre><code>protocol = "https"
uri = "smp-api.sc-b2b.us"
standard = "bdxr-smp-2"
identifier_scheme = "urn:oasis:names:tc:ebcore:partyid-type:iso6523:0088"
participant_id = "123456789"
urn = identifier_scheme + "::" + participant_id 
query_url_1 = protocol + "://" + uri + ":" + identifier_scheme + "::" + participant_id
query_url_2 = protocol + "://" + uri + ":" + urn
print(f"Value of query_url_1: {query_url_1}")
print(f"Value of query_url_2: {query_url_2}")
print(f"constructed urls are the same: {query_url_1 == query_url_2}")
</code></pre>
<h2 id="output">Output</h2>
<pre><code>Value of query_url_1: https://smp-api.sc-b2b.us:urn:oasis:names:tc:ebcore:partyid-type:iso6523:0088::123456789
Value of query_url_2: https://smp-api.sc-b2b.us:urn:oasis:names:tc:ebcore:partyid-type:iso6523:0088::123456789
constructed urls are the same: True
</code></pre>
<h2 id="2-service-metadata-query">2. Service Metadata Query</h2>
<h3 id="call-2-to-obtain-servicemetadata">Call #2 to obtain ServiceMetadata</h3>
<details class="important" open="open">
<summary>Inferring values for the ServiceMetadata REST web service call</summary>
<p>In the BPC Proof of Concept and creation of the Onboarding Toolkit, the service and document schemas defined by the SMP were static.  </p>
<p>The QName Subtype Identifier was used.   Validation of the queries resulted in assumption of the  value of some ServiceMetadata parameters.  <br/><br/></p>
</details>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../dns_query_sml/" class="md-footer__link md-footer__link--prev" aria-label="Previous: DNS Query for SML urn" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              DNS Query for SML urn
            </div>
          </div>
        </a>
      
      
        
        <a href="../test_cases/" class="md-footer__link md-footer__link--next" aria-label="Next: Test Cases" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Test Cases
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
    <div class="md-copyright">
        
         
        <!-- <div class="md-copyright__highlight">
        Copyright &copy; 2022 - BPC Exchange Framework Open Source Tools Project
      </div>
      --->
      <div class="md-copyright-display">
        Copyright &copy; 2022 - BPC Exchange Framework Open Source Tools Project</div>
        <div class="md-footer-disclaimer-text">
            <div class="md-footer-disclaimer-statement">
                No Representations or Warranties
            </div>

            THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT
            LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO
            EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
            AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE
            OR OTHER DEALINGS IN THE SOFTWARE.

        </div>



        
        
        <!--  <div>
            Made with
            <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
                Material for MkDocs
            </a>
            <div>
                
            </div>
        </div>  -->
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.8492ddcf.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
  </body>
</html>